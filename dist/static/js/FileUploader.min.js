function fileUploader(a){this.wrapperElement=a}fileUploader.prototype=function(){function a(){var a=this;a.options.fileInput.onchange=function(){d.call(a)?c.call(a):(alert("Problem uploading file"),this.value=null)},a.options.submitButton.onclick=function(){b.call(a)}}function b(){var a,b,c=this,d=c.options.fileInput.files;d.length&&(a=new FormData,a.append("file",d[0]),a.append("extra_params",JSON.stringify(c.options.extraParams)),b=new XMLHttpRequest,b.open("POST",this.options.url,!0),b.onreadystatechange=function(){b.readyState===XMLHttpRequest.DONE&&200===b.status&&(alert(b.responseText),c.options.fileInput.value=null,c.options.imgPlaceholder.style.display="none",c.options.imgPlaceholder.removeAttribute("src"))},b.send(a))}function c(){var a,b=this,c=b.options,d=c.fileInput.files[0];d.type.match("image/*")&&(a=new FileReader,a.onload=function(a){c.imgPlaceholder.style.display="block",c.imgPlaceholder.setAttribute("src",a.target.result)},a.readAsDataURL(d))}function d(a){var b=this.options;return!((a||b.fileInput.files[0]).size>b.maxFileSize)}function e(){var a=this.wrapperElement;a.innerHTML="";var b=document.createElement("input");b.type="button",b.value="submit";var c=document.createElement("input");c.type="file";var d=document.createElement("img");d.setAttribute("height","100"),d.setAttribute("width","100"),d.style.display="none",a.append(c),a.append(d),a.append(b),this.options.fileInput=c,this.options.submitButton=b,this.options.imgPlaceholder=d}function f(a){return!!(a&&this.wrapperElement&&a.url)}function g(b){if(!f.call(this,b))throw this.options=null,new Error("Insufficient options...");this.options=Object.assign({},h,b),e.call(this),a.call(this)}var h={maxFileSize:2e6};return{init:g,constructor:fileUploader}}();
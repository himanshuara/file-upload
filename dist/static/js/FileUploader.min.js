function fileUploader(a){this.wrapperElement=a}fileUploader.prototype=function(){function a(){var a=this;a.options.fileInput.onchange=function(){d.call(a)?c.call(a):(alert("Problem uploading file"),this.value=null)},a.options.submitButton.onclick=function(){b.call(a)}}function b(){var a,b,c=this,d=c.options.fileInput.files;d.length&&(a=new FormData,a.append("file",d[0]),a.append("extra_params",JSON.stringify(c.options.extraParams)),b=new XMLHttpRequest,b.open("POST",this.options.url,!0),b.onreadystatechange=function(){b.readyState===XMLHttpRequest.DONE&&200===b.status&&(alert(b.responseText),c.options.fileInput.value=null,c.options.imgPlaceholder.style.display="none",c.options.imgPlaceholder.removeAttribute("src"))},b.send(a))}function c(){var a,b=this,c=b.options,d=c.fileInput.files[0];d.type.match("image/*")&&(a=new FileReader,a.onload=function(a){c.imgPlaceholder.style.display="block",c.imgPlaceholder.setAttribute("src",a.target.result)},a.readAsDataURL(d))}function d(){var a=this.options;return!(a.fileInput.files[0].size>a.maxFileSize)}function e(){var a=this.wrapperElement,b=document.createElement("input");b.type="button",b.value="submit";var c=document.createElement("input");c.type="file";var d=document.createElement("img");d.setAttribute("height","100"),d.setAttribute("width","100"),d.style.display="none",a.append(c),a.append(d),a.append(b),this.options.fileInput=c,this.options.submitButton=b,this.options.imgPlaceholder=d}function f(a){if(!a||!this.wrapperElement||!a.url)throw"Insufficient options...";return!0}var g,h={maxFileSize:2e6};return g={init:function(b){f.call(this,b)?(this.options=Object.assign({},h,b),e.call(this),a.call(this)):this.options=null},constructor:fileUploader},g.validateOptions=f,g.validateFile=d,g}();